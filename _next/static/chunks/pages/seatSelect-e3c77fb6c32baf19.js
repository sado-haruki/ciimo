(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{768:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seatSelect",function(){return n(7846)}])},7846:function(e,t,n){"use strict";n.r(t),n.d(t,{ReservationSeatContext:function(){return _}});var s=n(5893),i=n(7294),a=n(9669),c=n.n(a),r=n(1664),l=n(8969),o=n(180),u=n.n(o),d=n(8392),f=n(1205),_=(0,i.createContext)(null);t.default=function(){var e=(0,i.useRef)([]),t=((0,i.useRef)(),(0,i.useState)()),n=t[0],a=t[1],o=(0,i.useState)(!1),_=o[0],v=o[1];(0,i.useEffect)((function(){h()}),[]);var h=function(){var t,n=(t=localStorage.getItem("reservation"))?JSON.parse(t):null;c().get("http://localhost:5000/theater/").then((function(t){var s,i,a,c=t.data;e.current=(null===(a=null===(i=null===(s=c.find((function(e){return e.id===n.theaterId})))||void 0===s?void 0:s.film.find((function(e){return e.id===n.filmId})))||void 0===i?void 0:i.schedule.find((function(e){return e.id===n.scheduleId})))||void 0===a?void 0:a.seat)||[],console.log(e),v(!0)}))};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(l.Z,{}),(0,s.jsxs)("div",{className:u().main,children:[(0,s.jsx)(f.Z,{select:1}),(0,s.jsxs)("div",{className:u().contants,children:[(0,s.jsx)("div",{className:u().selectField,children:_?(0,s.jsx)(d.Z,{seats:e.current,setSelectSeat:a||{}}):(0,s.jsx)(s.Fragment,{children:"\u8aad\u307f\u8fbc\u307f\u4e2d"})}),(0,s.jsxs)("div",{className:u().buttons,children:[(0,s.jsx)(r.default,{href:"/schedule",children:(0,s.jsx)("a",{children:(0,s.jsx)("button",{className:u().back,children:"\u691c\u7d22\u7d50\u679c\u306b\u623b\u308b"})})}),(0,s.jsx)(r.default,{href:"/confirm",children:(0,s.jsx)("a",{onClick:function(t){var s,i;t.stopPropagation(),h(),(null===(i=null===(s=e.current.find((function(e){return e.row===(null===n||void 0===n?void 0:n.row)})))||void 0===s?void 0:s.column.find((function(e){return e.seatName===(null===n||void 0===n?void 0:n.seatName)})))||void 0===i?void 0:i.reserved)?t.preventDefault():localStorage.setItem("reservationSeat",JSON.stringify(n))},children:(0,s.jsx)("button",{className:u().confirm,children:"\u6c7a\u5b9a\u3059\u308b"})})})]})]})]})]})}},180:function(e){e.exports={main:"seatSelect_main__0k1U_",contants:"seatSelect_contants__KyJ1U",selectField:"seatSelect_selectField__kgMaK",buttons:"seatSelect_buttons___SssJ",back:"seatSelect_back__jqfVi",confirm:"seatSelect_confirm__yskfd"}}},function(e){e.O(0,[669,119,774,888,179],(function(){return t=768,e(e.s=t);var t}));var t=e.O();_N_E=t}]);