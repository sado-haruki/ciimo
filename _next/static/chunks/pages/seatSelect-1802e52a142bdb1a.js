(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[605],{768:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/seatSelect",function(){return n(7846)}])},7846:function(e,t,n){"use strict";n.r(t);var s=n(5893),r=n(7294),a=n(9669),c=n.n(a),i=n(1664),o=n(8969),l=n(180),u=n.n(l),d=n(1764),f=n(1205);t.default=function(){var e=(0,r.useRef)([]),t=(0,r.useRef)(),n=(0,r.useState)(!1),a=n[0],l=n[1];(0,r.useEffect)((function(){v()}),[]);var _=function(t,n){var s,r,a;e.current=(null===(a=null===(r=null===(s=n.find((function(e){return e.id===t.theaterId})))||void 0===s?void 0:s.film.find((function(e){return e.id===t.filmId})))||void 0===r?void 0:r.schedule.find((function(e){return e.id===t.scheduleId})))||void 0===a?void 0:a.seat)||[]},v=function(){var e,t=(e=localStorage.getItem("reservation"))?JSON.parse(e):null;c().get("http://localhost:5000/theater/",{timeout:200}).then((function(e){_(t,e.data),l(!0)})).catch((function(e){c().get("https://my-json-server.typicode.com/sado-haruki/dbjson/theater").then((function(e){_(t,e.data),l(!0)}))}))},h=function(e){var n={row:e.row,seatName:e.seatName};t.current=n};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.Z,{}),(0,s.jsxs)("div",{className:u().main,children:[(0,s.jsx)(f.Z,{select:1}),(0,s.jsxs)("div",{className:u().contants,children:[(0,s.jsx)("div",{className:u().selectField,children:a?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:u().screen,children:"SCREEN"}),e.current.map((function(e,n){return(0,s.jsxs)("div",{className:u().seats,children:[(0,s.jsx)("span",{className:u().row,children:e.row}),e.column.map((function(n,r){return(0,s.jsx)(d.Z,{selectedSeat:t.current||{},reserved:n.reserved,clickSeat:h,seat:{row:e.row,seatName:n.seatName}},r)})),(0,s.jsx)("div",{className:u().row,children:e.row},n)]},n)}))]}):(0,s.jsx)(s.Fragment,{children:"\u8aad\u307f\u8fbc\u307f\u4e2d"})}),(0,s.jsxs)("div",{className:u().buttons,children:[(0,s.jsx)(i.default,{href:"/schedule",children:(0,s.jsx)("a",{children:(0,s.jsx)("button",{className:u().back,children:"\u691c\u7d22\u7d50\u679c\u306b\u623b\u308b"})})}),(0,s.jsx)(i.default,{href:"/confirm",children:(0,s.jsx)("a",{onClick:function(n){var s,r;n.stopPropagation(),v(),(null===(r=null===(s=e.current.find((function(e){var n;return e.row===(null===(n=t.current)||void 0===n?void 0:n.row)})))||void 0===s?void 0:s.column.find((function(e){var n;return e.seatName===(null===(n=t.current)||void 0===n?void 0:n.seatName)})))||void 0===r?void 0:r.reserved)?n.preventDefault():localStorage.setItem("reservationSeat",JSON.stringify(t.current))},children:(0,s.jsx)("button",{className:u().confirm,children:"\u6c7a\u5b9a\u3059\u308b"})})})]})]})]})]})}},180:function(e){e.exports={main:"seatSelect_main__0k1U_",contants:"seatSelect_contants__KyJ1U",selectField:"seatSelect_selectField__kgMaK",screen:"seatSelect_screen__DT_og",seats:"seatSelect_seats__IBANh",row:"seatSelect_row__osoeM",buttons:"seatSelect_buttons___SssJ",back:"seatSelect_back__jqfVi",confirm:"seatSelect_confirm__yskfd"}}},function(e){e.O(0,[669,206,774,888,179],(function(){return t=768,e(e.s=t);var t}));var t=e.O();_N_E=t}]);